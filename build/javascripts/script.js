$(document).ready(function(){function n(a){h=a.getContext("2d");var d=new Image;d.src="/images/avatar.jpg",d.height=c,d.width=b,d.onload=function(){h.drawImage(d,0,0,b,c),o(h)}}function o(a){var d=a.getImageData(0,0,b,c),e=d.data,g=400;for(y=0;y<c;y++){var h=[];for(x=0;x<b;x++){var i=Math.floor(Math.random()*255),k=(y*b+x)*4,l=e[k],n=e[k+1],o=e[k+2],p=m,q="rgb("+Math.floor(Math.random()*255).toString()+","+Math.floor(Math.random()*255).toString()+","+Math.floor(Math.random()*255).toString()+")";l<200&&n<115&&o<140&&(p=q);var r=180,s=0;l>s&&l<r&&n>s&&n<r&&o>s&&o<r&&(p=q);var r=180,s=140;l>s&&l<r&&n>s&&n<r&&o>s&&o<r&&(p=m);var t=!0;p==m&&(t=!1),h.push([[x],t]),a.fillStyle=p,t?a.fillRect(x,y,j,j):a.clearRect(x,y,j,j),x+=j-1}f.push(h),y+=j-1}}function p(a){function f(){k=window.setTimeout(function(){for(y=0;y<b.length;y++)for(x=0;x<b[0].length;x++){var a=b[y][x][1],g="rgb("+Math.floor(Math.random()*255).toString()+","+Math.floor(Math.random()*255).toString()+","+Math.floor(Math.random()*255).toString()+")",i=0;b[y-1]&&b[y-1][x-1]&&b[y-1][x-1][1]&&i++,b[y-1]&&b[y-1][x]&&b[y-1][x][1]&&i++,b[y-1]&&b[y-1][x+1]&&b[y-1][x+1][1]&&i++,b[y]&&b[y][x-1]&&b[y][x-1][1]&&i++,b[y]&&b[y][x+1]&&b[y][x+1][1]&&i++,b[y+1]&&b[y+1][x-1]&&b[y+1][x-1][1]&&i++,b[y+1]&&b[y+1][x]&&b[y+1][x][1]&&i++,b[y+1]&&b[y+1][x+1]&&b[y+1][x+1][1]&&i++;var k=i;c[y][x][1]=!1;if(a==1){if(k===d||k===e)c[y][x][1]=!0}else k===e&&(c[y][x][1]=!0);c[y][x][1]==1?(h.fillStyle=g,h.fillRect(x*j,y*j,j,j)):h.clearRect(x*j,y*j,j,j)}b=c,f()},100)}var b=a,c=a,d=2,e=3;l=!0,f()}function q(a,b,c){var d=.3*a+.59*b+.11*c,e=1;return a=Math.floor(d*e+a*(1-e)),b=Math.floor(d*e+b*(1-e)),c=Math.floor(d*e+c*(1-e)),[a,b,c]}function u(a){var b=5,c=a.getImageData(0,0,75,75),d=c.data;for(y=0;y<75;y++){for(x=0;x<75;x++){var e=(y*75+x)*4,f=Math.floor(d[e]),g=Math.floor(d[e+1]),h=Math.floor(d[e+2]),i=q(f,g,h);a.fillStyle="rgb("+i[0]+","+i[1]+","+i[2]+")",a.fillRect(x,y,b,b),x+=b-1}y+=b-1}}var a=document.getElementById("canvas"),b=150,c=150;a.width=b,a.height=c;var d=[],e=[],f=[],g=[],h,j=3,k,l=!1,m="rgba(0,0,0,0)";a&&a.getContext&&n(a),a.addEventListener("mouseover",function(){l||p(f)}),a.addEventListener("mouseout",function(){if(l=!0)l=!1;window.setTimeout(function(){l=!1,window.clearTimeout(k)},2e3)});var r=$(".project_thumbnail_image"),s=$(".project_thumbnail_canvas"),t=function(){for(i=0;i<s.length;i++)s[i].width=75,s[i].height=75,c_ctx=s[i].getContext("2d"),r[i].onLoad=function(a){c_ctx.drawImage(r[a],0,0,r[a].width,r[a].height),u(s[a].getContext("2d"))}(i)};t()});